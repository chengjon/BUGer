# BUGer 系统环境变量配置模板
# 复制此文件为 .env 并填入实际值

# ========== MongoDB 配置 ==========
# MongoDB 连接字符串
# 格式: mongodb://username:password@host:port/database?authSource=admin
MONGODB_URI=mongodb://your_user:your_password@localhost:27017/buger?authSource=admin

# MongoDB 数据库名称
MONGODB_DATABASE=buger

# ========== Redis 配置 ==========
# Redis 服务器地址
REDIS_HOST=localhost

# Redis 服务器端口
REDIS_PORT=6379

# Redis 密码（如果有）
REDIS_PASSWORD=

# Redis 数据库编号（0-15）
REDIS_DB=1

# ========== API 配置 ==========
# API 服务端口
API_PORT=3000

# API 环境
NODE_ENV=development

# API Key 密钥（用于签名和验证）
API_KEY_SECRET=your-super-secret-key-change-in-production

# ========== 速率限制配置 ==========
# 限流窗口（毫秒）
RATE_LIMIT_WINDOW_MS=60000

# 限流窗口内最大请求数
RATE_LIMIT_MAX_REQUESTS=200

# ========== 缓存配置 ==========
# 搜索结果缓存 TTL（秒）
CACHE_TTL_SEARCH=300

# 项目配置缓存 TTL（秒）
CACHE_TTL_PROJECT=3600

# BUG 详情缓存 TTL（秒）
CACHE_TTL_BUG=600

# ========== 日志配置 ==========
# 日志级别：debug, info, warn, error
LOG_LEVEL=info

# 日志输出格式：simple, json
LOG_FORMAT=json

# ========== 数据库配置 ==========
# MongoDB 连接池最小连接数
DB_POOL_MIN=5

# MongoDB 连接池最大连接数
DB_POOL_MAX=50

# MongoDB 连接超时（毫秒）
DB_CONNECT_TIMEOUT=30000

# ========== 性能配置 ==========
# 批量操作的批次大小
BATCH_SIZE=20

# 查询分页默认大小
DEFAULT_PAGE_SIZE=20

# 查询分页最大大小
MAX_PAGE_SIZE=100

# ========== 搜索配置 ==========
# 搜索类型：text (MongoDB Text Index) 或 atlas (MongoDB Atlas Search)
SEARCH_ENGINE=text

# 搜索结果最大数量
MAX_SEARCH_RESULTS=1000

# ========== 数据保留配置 ==========
# 热数据保留期（天）
HOT_DATA_RETENTION_DAYS=90

# 冷数据归档启用
ENABLE_COLD_STORAGE=false

# ========== 安全配置 ==========
# CORS 允许的源
CORS_ORIGIN=*

# CORS 允许的方法
CORS_METHODS=GET,POST,PATCH,DELETE

# 是否启用 HTTPS
USE_HTTPS=false

# ========== 监控告警配置 ==========
# 是否启用性能监控
ENABLE_MONITORING=true

# 性能指标采样率（0-1）
METRICS_SAMPLE_RATE=0.1

# 告警：搜索延迟阈值（毫秒）
ALERT_SEARCH_LATENCY_MS=2000

# 告警：错误率阈值（0-1）
ALERT_ERROR_RATE=0.01

# ========== 开发工具 ==========
# 是否启用 API 文档（Swagger）
ENABLE_SWAGGER=true

# Swagger 文档路径
SWAGGER_PATH=/api-docs

# 是否启用健康检查端点
ENABLE_HEALTH_CHECK=true